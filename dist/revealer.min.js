/*! typer v0.2.0 | (c) 2015 Pete Redmond |  */
!function(){"use strict";function t(t,e){function n(e,n,l){var u=angular.element(n[0]),c={};c.repeat=e.repeat="undefined"==typeof e.repeat?!0:e.repeat,c.count=0,c.startDelay=e.startDelay||500,c.pause=e.pause||1e3,c.typeTime=e.typeTime||250,c.backspaceTime=e.backspaceTime||c.typeTime,c.onTyped=e.onTyped,c.onDeleted=e.onDeleted,c.onComplete=e.onComplete,c.startTyping=e.startTyping=e.startTyping===!0?!0:!1,e.highlightBackground&&(c.highlight={},c.highlight.background=e.highlightBackground,c.highlight.color=e.highlightColor||"#FFFFFF",c.highlight.speed=c.backspaceTime),c.timer=null,t(function(){c.highlight&&(c.span=a(u,c)),c.startTyping?i(u,c):c.highlight?r(u,c):o(u,c)},c.startDelay),e.setInitalWord=function(){return c.startTyping?"":c.words[0]},e.$watchCollection("words",function(t,e){t&&(c.words=t,c.wordCount=c.words.length)})}function i(t,n){var i,a=n.words[n.count],u=a.length,c=0;n.timer=e(function(){if(t.html(a.substring(0,c+1)),++c===u){if(n.count===n.wordCount-1&&!n.repeat)return n.onComplete(),e.cancel(n.timer),void(n.timer=null);n.onTyped(),i=n.highlight?r:o,l(t,n,i)}},n.typeTime)}function o(t,n){var o=n.words[n.count],r=o.length;n.timer=e(function(){t.html(o.substring(0,r-1)),0===--r&&(n.count=n.count===n.wordCount-1?0:n.count+1,n.onDeleted(),l(t,n,i))},n.backspaceTime)}function r(n,o){var r=o.words[o.count],a=r.length;o.timer=e(function(){n.html(r.substring(0,a-1)),o.span.html(r.substring(a-1)),0===--a&&(t(function(){o.span.html("")},o.pause),o.count=o.count===o.wordCount-1?0:o.count+1,o.onDeleted(),l(n,o,i))},o.highlight.speed/a)}function a(t,e){var n=angular.element("<span></span>");return n.css({backgroundColor:e.highlight.background,color:e.highlight.color}),t.after(n),n}function l(n,i,o){e.cancel(i.timer),i.timer=null,t(function(){o.apply(null,[n,i])},i.pause)}return{template:'<span class="typer__cursor">{{setInitalWord()}}</span>',scope:{words:"=",repeat:"=?",cursor:"=?",startDelay:"@",pause:"@",typeTime:"@",backspaceTime:"@",highlightBackground:"@",highlightColor:"@",onTyped:"&",onComplete:"&",onDeleted:"&",startTyping:"=?"},link:n,restrict:"E"}}angular.module("typer",[]).directive("typer",t),t.$inject=["$timeout","$interval"]}();