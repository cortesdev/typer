/*! typer v0.2.2 | (c) 2015 Pete Redmond |  */
!function(t,e){"use strict";if("function"==typeof define&&define.amd)define(["angular"],e);else{if("undefined"==typeof module||"object"!=typeof module.exports)return e(t.angular);module.exports=e(require("angular"))}}(this,function(t){"use strict";function e(e,n){function o(n,o,i){var c=t.element(o[0]),s={};s.repeat=n.repeat="undefined"==typeof n.repeat?!0:n.repeat,n.shuffle=n.shuffle===!0?!0:!1,s.startTyping=n.startTyping=n.startTyping===!0?!0:!1,s.words=n.shuffle?p(n.words):n.words,s.wordCount=s.words.length,s.count=0,s.startDelay=n.startDelay||500,s.pause=n.pause||1e3,s.typeTime=n.typeTime||250,s.backspaceTime=n.backspaceTime||s.typeTime,s.onTyped=n.onTyped,s.onDeleted=n.onDeleted,s.onComplete=n.onComplete,s.timer=null,n.highlightBackground?(s.highlight={},s.highlight.background=n.highlightBackground,s.highlight.color=n.highlightColor||"#FFFFFF",s.highlight.speed=s.backspaceTime,s.backAction=a,s.span=l(c,s)):s.backAction=u,n.setInitalWord=function(){return s.startTyping?"":s.words[0]},n.$watchCollection("words",function(t,e){t&&(s.words=t,s.wordCount=s.words.length)}),e(function(){r(s,c)},s.startDelay)}function r(t,e){t.startTyping?i(e,t):t.highlight?a(e,t):u(e,t)}function i(t,e){var o=e.words[e.count],r=o.length,i=0;e.timer=n(function(){if(t.html(o.substring(0,i+1)),++i===r){if(e.count===e.wordCount-1&&!e.repeat)return e.onComplete(),void s(e);e.onTyped(),c(t,e,e.backAction)}},e.typeTime)}function u(t,e){var o=e.words[e.count],r=o.length;e.timer=n(function(){t.html(o.substring(0,r-1)),0===--r&&(e.count=h(e.count,e.wordCount),e.onDeleted(),c(t,e,i))},e.backspaceTime)}function a(t,o){var r=o.words[o.count],u=r.length;o.timer=n(function(){t.html(r.substring(0,u-1)),o.span.html(r.substring(u-1)),0===--u&&(e(function(){o.span.html("")},o.pause),o.count=h(o.count,o.wordCount),o.onDeleted(),c(t,o,i))},o.highlight.speed/u)}function l(e,n){var o=t.element("<span></span>");return o.css({backgroundColor:n.highlight.background,color:n.highlight.color}),e.after(o),o}function c(t,n,o){s(n),e(function(){o.apply(null,[t,n])},n.pause)}function s(t){n.cancel(t.timer),t.timer=null}function h(t,e){return t===e-1?0:t+1}function p(t){for(var e,n,o=t.length;o;)n=Math.floor(Math.random()*o),o--,e=t[o],t[o]=t[n],t[n]=e;return t}return{template:'<span class="typer__cursor">{{setInitalWord()}}</span>',scope:{words:"=",repeat:"=?",cursor:"=?",startDelay:"@",pause:"@",typeTime:"@",backspaceTime:"@",highlightBackground:"@",highlightColor:"@",onTyped:"&",onComplete:"&",onDeleted:"&",startTyping:"=?",shuffle:"=?"},link:o,restrict:"E"}}var n="typer";return t.module(n,[]).directive("typer",e),e.$inject=["$timeout","$interval"],n});