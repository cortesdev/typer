/*! typer v0.2.2 | (c) 2015 Pete Redmond |  */
!function(){"use strict";function t(t,e){function n(e,n,r){var l=angular.element(n[0]),c={};c.repeat=e.repeat="undefined"==typeof e.repeat?!0:e.repeat,e.shuffle=e.shuffle===!0?!0:!1,c.startTyping=e.startTyping=e.startTyping===!0?!0:!1,c.words=e.shuffle?h(e.words):e.words,c.wordCount=c.words.length,c.count=0,c.startDelay=e.startDelay||500,c.pause=e.pause||1e3,c.typeTime=e.typeTime||250,c.backspaceTime=e.backspaceTime||c.typeTime,c.onTyped=e.onTyped,c.onDeleted=e.onDeleted,c.onComplete=e.onComplete,c.timer=null,e.highlightBackground?(c.highlight={},c.highlight.background=e.highlightBackground,c.highlight.color=e.highlightColor||"#FFFFFF",c.highlight.speed=c.backspaceTime,c.backAction=a,c.span=u(l,c)):c.backAction=i,e.setInitalWord=function(){return c.startTyping?"":c.words[0]},e.$watchCollection("words",function(t,e){t&&(c.words=t,c.wordCount=c.words.length)}),t(function(){o(c,l)},c.startDelay)}function o(t,e){t.startTyping?r(e,t):t.highlight?a(e,t):i(e,t)}function r(t,n){var o=n.words[n.count],r=o.length,i=0;n.timer=e(function(){if(t.html(o.substring(0,i+1)),++i===r){if(n.count===n.wordCount-1&&!n.repeat)return n.onComplete(),void c(n);n.onTyped(),l(t,n,n.backAction)}},n.typeTime)}function i(t,n){var o=n.words[n.count],i=o.length;n.timer=e(function(){t.html(o.substring(0,i-1)),0===--i&&(n.count=s(n.count,n.wordCount),n.onDeleted(),l(t,n,r))},n.backspaceTime)}function a(n,o){var i=o.words[o.count],a=i.length;o.timer=e(function(){n.html(i.substring(0,a-1)),o.span.html(i.substring(a-1)),0===--a&&(t(function(){o.span.html("")},o.pause),o.count=s(o.count,o.wordCount),o.onDeleted(),l(n,o,r))},o.highlight.speed/a)}function u(t,e){var n=angular.element("<span></span>");return n.css({backgroundColor:e.highlight.background,color:e.highlight.color}),t.after(n),n}function l(e,n,o){c(n),t(function(){o.apply(null,[e,n])},n.pause)}function c(t){e.cancel(t.timer),t.timer=null}function s(t,e){return t===e-1?0:t+1}function h(t){for(var e,n,o=t.length;o;)n=Math.floor(Math.random()*o),o--,e=t[o],t[o]=t[n],t[n]=e;return t}return{template:'<span class="typer__cursor">{{setInitalWord()}}</span>',scope:{words:"=",repeat:"=?",cursor:"=?",startDelay:"@",pause:"@",typeTime:"@",backspaceTime:"@",highlightBackground:"@",highlightColor:"@",onTyped:"&",onComplete:"&",onDeleted:"&",startTyping:"=?",shuffle:"=?"},link:n,restrict:"E"}}angular.module("typer",[]).directive("typer",t),t.$inject=["$timeout","$interval"]}();